# Haciendo la epica con Marquitos
## Historia

. Cuando programamos en ASM86, interactuamos el hardware de la computadora.

. El 8086, creado un programador, fue diseñado para los programadores.

* Es importante diferencia estos 2 casos : 
    
    * Microprocesador: Es como un *cerebro*, no puedes hacer **nada** debido a que necesitas hardware aparte para poder trabajar con el microprocesador.
    * Microcontrolador: Posee el hardware necesario, inclusive posee un **microprocesador**. Sin embargo no es tan potente como un microprocesador en solitario.

> Podemos que usar ChatGPT como una ayuda para programar.

![microprocesadorVSmicocontrolador](https://i.imgur.com/8YHhFUh.png)

## Arquitectura

. Es importante sabes las equivalencias entre numeros binarios.
![equivalencias](https://www.ionos.es/digitalguide/fileadmin/_processed_/d/c/csm_diferentes-tamanos-de-almacenamiento-en-comparacion-con_el_megabyte_e3a9e79e19.webp)

. [El manual de 8086](https://bitsavers.org/components/intel/8086/9800722-03_The_8086_Family_Users_Manual_Oct79.pdf)

### Registros Generales

* Dos grupos
    
    * Grupos de datos (DATA GROUP)
    * Grupos de punteros e indices (POINTER AND INDEX GROUP)

![Registros](https://i.imgur.com/9d8aTXC.png)
> El profe solo menciona, pero no explica aun uso.

. Las instrucciones puedes demorar diferentes cantidades de tiempo (CISC).

## Programacion 

### Funciones comunes 

| Codigo | Explicacion |
| --------------- | --------------- |
| `MOV  AX, 0x1234` | Carga el valor 0x1234 en AX |
| `INC  AX` | Aumenta en 1 el valor de AX |
| `MOV  (address), 0x1234` | Carga el valor 0x1234 en la direccion de memoria |

> No es importante memorizar todo esto, mejor lo explicamos en programas mas complejos

. Por defecto, el emu te muestra el segmento de memoria donde esta tu codigo.

. Es von Neuman, tiene instrucciones y datos en una misma memoria

. Para encontrar la direccion de memoria (physical address) se debe seguir lo siguiente

    (Segment Register -DS-) * 10h + offset

**IMPORTANTE**
![Segementos de registro](https://i.imgur.com/uNQ8b6y.png)

## Programas mas complejos

### Decrementar 5 veces su valor
```asm 
mov ax, 0x0009
mov bx, 5
ga:
    dec ax   
    dec bx
    jz $        ;Esto es un bucle a si mismo
jmp ga
```
### Implementacion de un `if`
```asm
mov ax, 20
mov bx, 44
cmp ax, bx  ; comparamos
jl menor    ; si ax < bx
mov cx, 7   ; si ax >= bx
jmp fin
menor:   
    mov dx, 7
fin:
mov ax, 0xF
jmp $
```

### Ejemplo de subrutinas
```asm
mov ax, 70h
mov bx, 80h
mov cX, 90h
mov dx, 100h 
call subrutina ; LLamamos 4 veces a la subrutina
call subrutina
call subrutina
call subrutina
nop
jmp $
subrutina:
    inc ax
    inc bx
    inc cx
    inc dx
ret
```

## Interrupciones

. Ya estan configuradas

### Imprimir un caracter
```asm
 mov al, 'd' ; Ubicamos en AL el caracter a imprimir
 mov ah, 0eh  
 int 10h     ; Imprimimos el caracter de AL
```

### Imprimir palabra caracter por caracter
```asm
; Tenemos que ubicar el DS 
mov ax, 0x1000      ; Alejado del CS
mov ds, ax

; Constantes
CONTADOR equ 0x0009

mov ah, 0eh         ; Cargo la interrupcion
mov (0x0001), 'P'
mov (0x0002), 'A'
mov (0x0003), 'P'
mov (0x0004), 'A'
mov (0x0005), 'Y'
mov (0x0006), 'A'
mov bx, 0x0001      ; Registro bx al 0x0001
mov (CONTADOR), 6   ; Contador
lazo:     
    mov al, (bx)    ; Asignamos el valor AL 
    int 10h         ; Imprimimos
    inc bx
    dec (CONTADOR)
    jz $
jmp lazo              
```

### Colorear un pixel

```asm
; Establecer el modo grafico (320x200) 
mov ah, 0 
mov al, 13h
int 10h
; Colorear un pixel
mov ah, 0ch        
mov al, 0000_1100b  ; Color del pixel
mov cx, 122         ; Columna
mov dx, 100         ; Fila
int 10h             ; Coloreamos el pixel
```
### Linea horizontal 

```asm
; Establecemos la ubicacion del DS
mov ax, 0x1000
mov ds, ax

; Constantes
FILA equ 100
COLUMNA equ 200
LONGITUD equ 30
CONTADOR equ 0x0020

; Establecer el modo grafico (320x200) 
mov ah, 0 
mov al, 13h
int 10h

; Colorear un pixel
mov ah, 0ch        
mov al, 0000_1100b   ; Color del pixel
mov cx, COLUMNA      ; Columna
mov dx, FILA         ; Fila
int 10h              ; Coloreamos el pixel

; Dibujar     
mov (CONTADOR), LONGITUD
lazo:   
    int 10h
    inc cx
    dec (CONTADOR)  
    je $
jmp lazo
```

### Leer un caracter
```asm
mov ax, 0x1000     ; Carga el valor hexadecimal 0x1000 en el registro AX
mov ds, ax         ; Establece el segmento de datos (DS) igual al valor de AX (0x1000)

VALOR equ 0x000f   ; Define la constante VALOR con el valor hexadecimal 0x000f
MEMORIA equ 0x0100 ; Define la constante MEMORIA con el valor hexadecimal 0x0100

mov ah, 1          ; Coloca el valor 1 en el registro AH, indicando la función deseada para la interrupción 21h

mov (MEMORIA), VALOR ; Almacena el valor de VALOR (0x000f) en la dirección de memoria apuntada por MEMORIA (0x0100)

lazo:              ; Etiqueta para marcar el comienzo de un bucle

int 21h            ; Realiza una llamada a la interrupción 21h de DOS

cmp al, 0x0d       ; Compara el valor del registro AL con 0x0d (Enter)

je $               ; Salta al final del programa si el valor de AL es igual a 0x0d (Enter)

mov (MEMORIA), al  ; Almacena el valor actual del registro AL en la dirección de memoria apuntada por MEMORIA
inc ([MEMORIA])    ; Incrementa el valor almacenado en la dirección de memoria apuntada por MEMORIA

jmp lazo           ; Salta de nuevo a la etiqueta "lazo" para repetir el bucle
```

## CODIGOS UTILES

```asm
; Redirigimos el DS  
mov ax, 0x1000
mov ds, ax


; Variables auxiliares
fila EQU 0x0101
columna EQU 0x0002
ancho EQU 30


; Configuracion para mostrar el primer mensaje "Ingresa la fila"
mov ah, 13h       ; Servicio de la interrupcion de la BIOS para mostrar un string en pantalla
mov al, 1         ; Sub-servicio para escribir texto en pantalla
mov bh, 0         ; Pagina de memoria a utilizar (en este caso, la pagina 0)

mov bl, 1001_1111b              ; Configuracion de colores para el primer mensaje
mov cx, msg1end - offset msg1   ; Cantidad de caracteres a mostrar en el primer mensaje
mov dl, 0                       ; Columna en la que comenzará a mostrarse el primer mensaje
mov dh, 0                       ; Fila en la que comenzara a mostrarse el primer mensaje

push cs           ; Cargar el segmento de codigo en ES
pop es

mov bp, offset msg1      ; Cargar la direccion del primer mensaje en BP

int 10h           ; Llama a la interrupcion de la BIOS para mostrar el primer mensaje

; Seccion para leer un caracter
mov ah, 01h       ; Servicio de la interrupcion de la BIOS para leer un caracter  
mov bx, 0x000f
mov (fila), 0 

leer_fila:
      
    mov ah, 01h 
    int 21h
  
    cmp al, 0x0d
    je fin_lectura_fila    
           
    mov (bx), al
    sub (bx), 48 
    
    mov ax, 10
    mul [(fila)]
    mov [(fila)], ax
    
    mov cx, [(bx)]
    add [(fila)], cx 
      
    jmp leer_fila 

fin_lectura_fila:                                                
        

; Configuracion para mostrar el segundo mensaje "Hola mundo"
mov ah, 13h       ; Servicio de la interrupcion de la BIOS para mostrar un string en pantalla
mov al, 1         ; Sub-servicio para escribir texto en pantalla
mov bh, 0         ; Pagina de memoria a utilizar (en este caso, la pagina 0)

mov bl, 1001_1111b              ; Configuracion de colores para el segundo mensaje
mov cx, msg2end - offset msg2   ; Cantidad de caracteres a mostrar en el segundo mensaje
mov dl, 0                       ; Columna en la que comenzara a mostrarse el segundo mensaje
mov dh, 3                       ; Fila en la que comenzara a mostrarse el segundo mensaje

push cs           ; Cargar el segmento de codigo en ES
pop es

mov bp, offset msg2      ; Cargar la direccion del segundo mensaje en BP

int 10h           ; Llama a la interrupcion de la BIOS para mostrar el segundo mensaje


; Seccion para leer un caracter
mov ah, 01h       ; Servicio de la interrupcion de la BIOS para leer un caracter  
mov bx, 0x000f
mov (columna), 0 

leer_columna:
      
    mov ah, 01h 
    int 21h
  
    cmp al, 0x0d
    je fin_lectura_columna    
           
    mov (bx), al
    sub (bx), 48 
    
    mov ax, 10
    mul [(columna)]
    mov [(columna)], ax
    
    mov cx, [(bx)]
    add [(columna)], cx 
      
    jmp leer_columna 

fin_lectura_columna:                 


; Grafico del cuadrado
mov cx, 0

mov ah, 0
mov al, 13h
int 10h

mov ah, 0ch
mov al, 0000_1100b

mov si, fila
mov dx, [si]
mov si, columna
mov cx, [si] 

mov bl, ancho
mov bh, 'r'
call linea_horizontal

mov bl, ancho
mov bh, 'd'
call linea_vertical

mov bl, ancho
mov bh, 'l'    
call linea_horizontal

mov bl, ancho
mov bh, 'u'       
call linea_vertical


fin:
jmp fin           ; Fin del programa

linea_horizontal:
    int 10h
    cmp bh, 'r'
    je derecha
    
    izquieda: 
        dec cx                  
    jmp hasta_final_hor     

    derecha:
        inc cx
    
    hasta_final_hor:
        dec bl
        jz sig    
    jmp linea_horizontal    


linea_vertical:
    int 10h
    cmp bh, 'd'
    je abajo
    
    arriba: 
        dec dx                  
    jmp hasta_final_ver     

    abajo:
        inc dx
    
    hasta_final_ver:
        dec bl
        jz sig    
    jmp linea_vertical    
sig: ret



; Definicion del primer mensaje "Ingresa la fila"
msg1 db "Ingresa la fila", 13, 10       ; Incluye retorno de carro y salto de linea
msg1end:

; Definicion del segundo mensaje "Ingresa la columna"
msg2 db "Ingresa la columna", 13, 10    ; Incluye retorno de carro y salto de linea
msg2end:
```

```asm
; You may customize this and other start-up templates; 
; The location of this template is c:\emu8086\inc\0_com_template.txt

org 100h

;INICIAMOS EL MODO GRAFICO
MOV AL, 13H
MOV AH, 0
INT 10H
       
CALL CARGA_COLORES

MOV AX, X_INICIAL
MOV X_POS, AX

MOV AX, Y_INICIAL
MOV Y_POS, AX       
MOV BX, DIR_COLORES       
;DIBUJO
FUN_COLUMNA:
    
    FUN_LINEA:
              
        MOV CX,X_POS
        MOV DX,Y_POS
        MOV AL,(BX)
         
        CALL DIBUJA_PIXEL
        
        MOV CX,X_POS
        MOV DX,Y_POS
        
        ADD CX,LADO
        CALL GUARDA_POS
        INC BX
        CMP CX, LONGITUD_LADO
        
        JNZ FUN_LINEA
    
    MOV CX, X_INICIAL
    ADD DX, LADO
    CALL GUARDA_POS
    CMP DX, LONGITUD_ANCHO
    JNZ FUN_COLUMNA 
    

;MOV CX,50
;MOV DX,50
;MOV AL,WHT
;
;CALL DIBUJA_PIXEL

ret

;============
;DEFINICIONES
;============
BLK DB 0000B   ;NEGRO
WHT DB 1111B   ;BLANCO
GRN DB 0010B   ;VERDE
MGT DB 1101B   ;MAGENTA


;=========
;VARIABLES
;=========

;MEDIDAS DEL PIXEL
LADO    DW 5
ANCHO   DW 5
LONGITUD_LADO   DW 110;X_INICIAL + (LADO*CANT_PIXELES)
LONGITUD_ANCHO  DW 130;Y_INCIAL + (ANCHO*CANT_PIXELES)

;VARIABLES PARA ALMACENAR LAS COORDENADAS
X_INICIAL DW 50
Y_INICIAL DW 50

X_POS DW ?
Y_POS DW ?

X_MIN DW ?
X_MAX DW ?
Y_MIN DW ?
Y_MAX DW ?

COLOR DB ?

DIR_COLORES DW 0X000F
CONT DW 0  


;EL PROCEDIMIENTO DIBUJA_PIXEL REQUIERE
;LOS SIGUIENTES VALORES
; CX    POSICION X INICIAL
; DX    POSICION Y INICIAL
; AL    COLOR DEL PIXEL

DIBUJA_PIXEL PROC
    
    ;GUARDA EL COLOR INDICADO
    MOV COLOR,AL
    
    ;GUARDAMOS LOS PUNTOS DEL CUADRADO
    MOV X_MIN, CX
    MOV Y_MIN, DX
    MOV X_MAX, CX
    MOV Y_MAX, DX
    
    MOV AX, LADO
    ADD X_MAX, AX
    
    MOV AX, ANCHO
    ADD Y_MAX, AX
    
    ;COLOR DEL PIXEL
    MOV AL, COLOR
    
    ;SOLO SE COLOREA UN PIXEL
    MOV AH, 0CH 
    
    ;DIBUJO UN PIXEL
    
    COLUMNA1:
        MOV CX, X_MIN
        
        LINEA1:
            ;DIBUJO
            INT 10H
            ;ACTUALIZO VALORES
            INC CX
            
            ;COMPARO SI LLEGO AL LARGO
            CMP CX, X_MAX
            
            JNZ LINEA1
            
        INC DX
        CMP DX, Y_MAX
        JNZ COLUMNA1
    
    RET
DIBUJA_PIXEL ENDP
 
CARGA_COLORES PROC
    MOV BX, DIR_COLORES
    
    ;LINEA 1
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 2
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 3
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 4
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 5
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    
    ;LINEA 6
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 7
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 8
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 9
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 10
    
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    
    ;LINEA 11
    
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA 
    
    ;LINEA 12
    
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    
    ;LINEA 13
    
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    
    ;LINEA 14
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 15
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 16
    
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA 
    
CARGA_COLORES ENDP

CARGA PROC
    
    MOV (BX),AL
    INC BX
    RET  
    
CARGA ENDP 

GUARDA_POS PROC
    
    MOV X_POS, CX
    MOV Y_POS, DX
    RET
    
GUARDA_POS ENDP
```

```asm
; You may customize this and other start-up templates; 
; The location of this template is c:\emu8086\inc\0_com_template.txt

org 100h

 MOV AL, 13H
 MOV AH,0  
 INT 10H
 
MOV AX, 80
MOV BX, 70

MOV CX, 0
MOV DX, 80

CALL DIBUJA_BRESENHAM 

MOV AX, 80
MOV BX, 70

MOV CX, 0

CALL DIBUJA_LINEA_VERTICAL

MOV AX, 80
MOV BX, 70

MOV CX, 180

CALL DIBUJA_LINEA_HORIZONTAL

MOV AX, 180 
MOV BX, 70

MOV CX, 0

CALL DIBUJA_LINEA_VERTICAL

MOV AX, 180
MOV BX, 70

MOV CX, 200
MOV DX, 100

CALL DIBUJA_BRESENHAM

MOV AX, 200 
MOV BX, 100

MOV CX, 0

CALL DIBUJA_LINEA_VERTICAL

MOV AX, 200
MOV BX, 100

MOV CX, 320

CALL DIBUJA_LINEA_HORIZONTAL

CALL CARGA_COLORES

MOV AX, X_INICIAL
MOV X_POS, AX

MOV AX, Y_INICIAL
MOV Y_POS, AX       
MOV BX, DIR_COLORES       
;DIBUJO
FUN_COLUMNA:
    
    FUN_LINEA:
              
        MOV CX,X_POS
        MOV DX,Y_POS
        MOV AL,(BX)
        
        CMP AL,TRS
        JZ TRANSPARENCIA
           
         
        CALL DIBUJA_PIXEL2
        
        MOV CX,X_POS
        MOV DX,Y_POS

        TRANSPARENCIA:
        INC BX
        ADD CX,LADO
        CALL GUARDA_POS       
        
        CMP CX, LONGITUD_LADO
        JNZ FUN_LINEA 
        
        
  
    MOV CX, X_INICIAL
    ADD DX, LADO
    CALL GUARDA_POS
    CMP DX, LONGITUD_ANCHO
    JNZ FUN_COLUMNA 

ret 

;=============
;VARIABLES
;=============
X1 DW ?
Y1 DW ?

X2 DW ?
Y2 DW ?

POSX DW ?
POSY DW ?

AVR DW ?
AV DW ?
AVI DW ?

BLK DB 0000B   ;NEGRO
WHT DB 1111B   ;BLANCO
GRN DB 0010B   ;VERDE
MGT DB 1101B   ;MAGENTA

TRS DB 0000B    ; COLOR DE TRANSPARENCIA EN ESTE CASO NEGRO

COLOR DB ?

LADO    DW 5
ANCHO   DW 5
LONGITUD_LADO   DW 110;X_INICIAL + (LADO*CANT_PIXELES) 50 + 2(12)
LONGITUD_ANCHO  DW 130;Y_INCIAL + (ANCHO*CANT_PIXELES) 50 + 2(16)

;VARIABLES PARA ALMACENAR LAS COORDENADAS
X_INICIAL DW 50
Y_INICIAL DW 50

X_POS DW ?
Y_POS DW ?

X_MIN DW ?
X_MAX DW ?
Y_MIN DW ?
Y_MAX DW ?

DIR_COLORES DW 0X000F

;DISTANCIAS ENTRE LOS PUNTOS
DISY DW ?
DISX DW ?

;INCLINACIONES
INCYI DW 0
INCXI DW 0

INCYR DW 0
INCXR DW 0

;==============
;PROCEDIMIENTOS
;==============

DIBUJA_BRESENHAM PROC
    
    ;PRIMERO GUARDO LAS COORDENADAS EN SUS VARIABLES
    MOV X1, AX
    MOV Y1, BX
    
    MOV X2, CX
    MOV Y2, DX
    
    ;INICIALIZAMOS LOS VALORES
    
    MOV AX, 0
    MOV POSX, AX,
    MOV POSY, AX
    MOV AVR, AX
    MOV AV, AX
    MOV AVI, AX
    MOV DISY, AX
    MOV DISX, AX
    MOV INCYI, AX
    MOV INCXI, AX
    MOV INCYR, AX
    MOV INCXR, AX
    
    ;CALCULAMOS LAS DISTANCIAS
    
    MOV AX, Y2
    SBB AX, Y1
    MOV DISY, AX
    
    MOV AX, X2
    SBB AX,X1
    MOV DISX, AX 
    
    CMP DISY,0
    
    JS YNEGA
    JNS YPOS
    
    YNEGA:
        MOV AX, DISY
        NEG AX
        MOV DISY,AX
        DEC INCYI
        JMP OUT_YNEGA    
    YPOS:
        INC INCYI
        JMP OUT_YNEGA
        
    OUT_YNEGA:
    
    CMP DISX,0
    
    JS XNEGA
    JNS XPOS
    
    XNEGA:
        MOV AX, DISX
        NEG AX
        MOV DISX,AX
        DEC INCXI
        JMP OUT_XNEGA    
    XPOS:
        INC INCXI
        JMP OUT_XNEGA
        
    OUT_XNEGA: 
     
    MOV AX, DISX
    CMP AX,DISY
    
    JNS XMAYOR
    JS YMAYOR
    
    XMAYOR:
        MOV AX, 0
        MOV INCYR, AX
        MOV AX, INCXI
        MOV INCXR, AX
        JMP MAYORFUERA
    YMAYOR:
        MOV AX, 0
        MOV INCXR, AX
        MOV AX, INCYI
        MOV INCYR, AX
        
        MOV AX, DISX
        MOV DX, DISY
        
        MOV DISX, DX
        MOV DISY, AX
        JMP MAYORFUERA
    
    MAYORFUERA:
       
    MOV AX, X1
    MOV POSX, AX
    
    MOV AX, Y1
    MOV POSY, AX
    
    MOV DX, DISY
    MOV AX, 2
    MUL DX
    
    MOV AVR, AX
    
    SBB AX, DISX
    MOV AV, AX
    
    SBB AX, DISX
    MOV AVI, AX
    
    BUCLE:
        CALL DIBUJA_PIXEL
        
        CMP AV,0
        JS AVNEGA
        JNS AVPOSI
        
        AVNEGA:
            MOV AX, POSX
            ADD AX, INCXR
            MOV POSX, AX
            
            MOV AX, POSY
            ADD AX, INCYR
            MOV POSY, AX
            
            MOV AX, AV
            ADD AX, AVR
            MOV AV, AX
            JMP OUT_AV
        AVPOSI:
            MOV AX, POSX
            ADD AX, INCXI
            MOV POSX, AX
            
            MOV AX, POSY
            ADD AX, INCYI
            MOV POSY, AX
            
            MOV AX, AV
            ADD AX, AVI
            MOV AV, AX
            JMP OUT_AV
        
        OUT_AV:
        ;VALIDACION
        MOV AX, X2 
        CMP AX,POSX
        JZ PRIMERA_VALIDACION
        JMP OUT_VALIDACION
        
        PRIMERA_VALIDACION:
            MOV AX, Y2
            CMP AX, POSY
            JZ SEGUNDA_VALIDACION
            JMP OUT_VALIDACION  
        
        OUT_VALIDACION: 
        JMP BUCLE
        SEGUNDA_VALIDACION:
        ;VALIDACION
    RET
    
DIBUJA_BRESENHAM ENDP

DIBUJA_LINEA_VERTICAL PROC
    
      MOV POSX, AX
      MOV POSY, BX
      
      MOV BX, CX
      
      PINTA:
        CALL DIBUJA_PIXEL
        DEC POSY
        CMP BX, POSY
        JZ OUT_PINTA
        JMP PINTA
      OUT_PINTA: 
      RET      
    
DIBUJA_LINEA_VERTICAL ENDP

DIBUJA_LINEA_HORIZONTAL PROC
        
      MOV POSX, AX
      MOV POSY, BX
      
      MOV BX, CX
      
      PINTA_H:
        CALL DIBUJA_PIXEL
        INC POSX
        CMP BX, POSX
        JZ OUT_PINTA_H
        JMP PINTA_H
      OUT_PINTA_H:  
      RET  
DIBUJA_lINEA_HORIZONTAL ENDP

DIBUJA_PIXEL PROC
     MOV AL, WHT
     MOV CX, POSX
     MOV DX, POSY
     MOV AH, 0CH
     INT 10H
     RET
DIBUJA_PIXEL ENDP

DIBUJA_PIXEL2 PROC
    
    ;GUARDA EL COLOR INDICADO
    MOV COLOR,AL
    
    ;GUARDAMOS LOS PUNTOS DEL CUADRADO
    MOV X_MIN, CX
    MOV Y_MIN, DX
    MOV X_MAX, CX
    MOV Y_MAX, DX
    
    MOV AX, LADO
    ADD X_MAX, AX
    
    MOV AX, ANCHO
    ADD Y_MAX, AX
    
    ;COLOR DEL PIXEL
    MOV AL, COLOR
    
    ;SOLO SE COLOREA UN PIXEL
    MOV AH, 0CH 
    
    ;DIBUJO UN PIXEL
    
    COLUMNA1:
        MOV CX, X_MIN
        
        LINEA1:
            ;DIBUJO
            INT 10H
            ;ACTUALIZO VALORES
            INC CX
            
            ;COMPARO SI LLEGO AL LARGO
            CMP CX, X_MAX
            
            JNZ LINEA1
            
        INC DX
        CMP DX, Y_MAX
        JNZ COLUMNA1
    
    RET
DIBUJA_PIXEL2 ENDP

CARGA_COLORES PROC
    MOV BX, DIR_COLORES
    
    ;LINEA 1
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 2
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 3
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 4
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 5
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    
    ;LINEA 6
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 7
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 8
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 9
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 10
    
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    
    ;LINEA 11
    
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA 
    
    ;LINEA 12
    
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    
    ;LINEA 13
    
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    
    ;LINEA 14
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 15
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 16
    
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA 
    
CARGA_COLORES ENDP

CARGA PROC
    
    MOV (BX),AL
    INC BX
    RET  
    
CARGA ENDP 

GUARDA_POS PROC
    
    MOV X_POS, CX
    MOV Y_POS, DX
    RET
    
GUARDA_POS ENDP


; You may customize this and other start-up templates; 
; The location of this template is c:\emu8086\inc\0_com_template.txt

org 100h

 MOV AL, 13H
 MOV AH,0  
 INT 10H
 
MOV AX, 80
MOV BX, 70

MOV CX, 0
MOV DX, 80

CALL DIBUJA_BRESENHAM 

MOV AX, 80
MOV BX, 70

MOV CX, 0

CALL DIBUJA_LINEA_VERTICAL

MOV AX, 80
MOV BX, 70

MOV CX, 180

CALL DIBUJA_LINEA_HORIZONTAL

MOV AX, 180 
MOV BX, 70

MOV CX, 0

CALL DIBUJA_LINEA_VERTICAL

MOV AX, 180
MOV BX, 70

MOV CX, 200
MOV DX, 100

CALL DIBUJA_BRESENHAM

MOV AX, 200 
MOV BX, 100

MOV CX, 0

CALL DIBUJA_LINEA_VERTICAL

MOV AX, 200
MOV BX, 100

MOV CX, 320

CALL DIBUJA_LINEA_HORIZONTAL

CALL CARGA_COLORES

MOV AX, X_INICIAL
MOV X_POS, AX

MOV AX, Y_INICIAL
MOV Y_POS, AX       
MOV BX, DIR_COLORES       
;DIBUJO
FUN_COLUMNA:
    
    FUN_LINEA:
              
        MOV CX,X_POS
        MOV DX,Y_POS
        MOV AL,(BX)
        
        CMP AL,TRS
        JZ TRANSPARENCIA
           
         
        CALL DIBUJA_PIXEL2
        
        MOV CX,X_POS
        MOV DX,Y_POS

        TRANSPARENCIA:
        INC BX
        ADD CX,LADO
        CALL GUARDA_POS       
        
        CMP CX, LONGITUD_LADO
        JNZ FUN_LINEA 
        
        
  
    MOV CX, X_INICIAL
    ADD DX, LADO
    CALL GUARDA_POS
    CMP DX, LONGITUD_ANCHO
    JNZ FUN_COLUMNA 

ret 

;=============
;VARIABLES
;=============
X1 DW ?
Y1 DW ?

X2 DW ?
Y2 DW ?

POSX DW ?
POSY DW ?

AVR DW ?
AV DW ?
AVI DW ?

BLK DB 0000B   ;NEGRO
WHT DB 1111B   ;BLANCO
GRN DB 0010B   ;VERDE
MGT DB 1101B   ;MAGENTA

TRS DB 0000B    ; COLOR DE TRANSPARENCIA EN ESTE CASO NEGRO

COLOR DB ?

LADO    DW 5
ANCHO   DW 5
LONGITUD_LADO   DW 110;X_INICIAL + (LADO*CANT_PIXELES) 50 + 2(12)
LONGITUD_ANCHO  DW 130;Y_INCIAL + (ANCHO*CANT_PIXELES) 50 + 2(16)

;VARIABLES PARA ALMACENAR LAS COORDENADAS
X_INICIAL DW 50
Y_INICIAL DW 50

X_POS DW ?
Y_POS DW ?

X_MIN DW ?
X_MAX DW ?
Y_MIN DW ?
Y_MAX DW ?

DIR_COLORES DW 0X000F

;DISTANCIAS ENTRE LOS PUNTOS
DISY DW ?
DISX DW ?

;INCLINACIONES
INCYI DW 0
INCXI DW 0

INCYR DW 0
INCXR DW 0

;==============
;PROCEDIMIENTOS
;==============

DIBUJA_BRESENHAM PROC
    
    ;PRIMERO GUARDO LAS COORDENADAS EN SUS VARIABLES
    MOV X1, AX
    MOV Y1, BX
    
    MOV X2, CX
    MOV Y2, DX
    
    ;INICIALIZAMOS LOS VALORES
    
    MOV AX, 0
    MOV POSX, AX,
    MOV POSY, AX
    MOV AVR, AX
    MOV AV, AX
    MOV AVI, AX
    MOV DISY, AX
    MOV DISX, AX
    MOV INCYI, AX
    MOV INCXI, AX
    MOV INCYR, AX
    MOV INCXR, AX
    
    ;CALCULAMOS LAS DISTANCIAS
    
    MOV AX, Y2
    SBB AX, Y1
    MOV DISY, AX
    
    MOV AX, X2
    SBB AX,X1
    MOV DISX, AX 
    
    CMP DISY,0
    
    JS YNEGA
    JNS YPOS
    
    YNEGA:
        MOV AX, DISY
        NEG AX
        MOV DISY,AX
        DEC INCYI
        JMP OUT_YNEGA    
    YPOS:
        INC INCYI
        JMP OUT_YNEGA
        
    OUT_YNEGA:
    
    CMP DISX,0
    
    JS XNEGA
    JNS XPOS
    
    XNEGA:
        MOV AX, DISX
        NEG AX
        MOV DISX,AX
        DEC INCXI
        JMP OUT_XNEGA    
    XPOS:
        INC INCXI
        JMP OUT_XNEGA
        
    OUT_XNEGA: 
     
    MOV AX, DISX
    CMP AX,DISY
    
    JNS XMAYOR
    JS YMAYOR
    
    XMAYOR:
        MOV AX, 0
        MOV INCYR, AX
        MOV AX, INCXI
        MOV INCXR, AX
        JMP MAYORFUERA
    YMAYOR:
        MOV AX, 0
        MOV INCXR, AX
        MOV AX, INCYI
        MOV INCYR, AX
        
        MOV AX, DISX
        MOV DX, DISY
        
        MOV DISX, DX
        MOV DISY, AX
        JMP MAYORFUERA
    
    MAYORFUERA:
       
    MOV AX, X1
    MOV POSX, AX
    
    MOV AX, Y1
    MOV POSY, AX
    
    MOV DX, DISY
    MOV AX, 2
    MUL DX
    
    MOV AVR, AX
    
    SBB AX, DISX
    MOV AV, AX
    
    SBB AX, DISX
    MOV AVI, AX
    
    BUCLE:
        CALL DIBUJA_PIXEL
        
        CMP AV,0
        JS AVNEGA
        JNS AVPOSI
        
        AVNEGA:
            MOV AX, POSX
            ADD AX, INCXR
            MOV POSX, AX
            
            MOV AX, POSY
            ADD AX, INCYR
            MOV POSY, AX
            
            MOV AX, AV
            ADD AX, AVR
            MOV AV, AX
            JMP OUT_AV
        AVPOSI:
            MOV AX, POSX
            ADD AX, INCXI
            MOV POSX, AX
            
            MOV AX, POSY
            ADD AX, INCYI
            MOV POSY, AX
            
            MOV AX, AV
            ADD AX, AVI
            MOV AV, AX
            JMP OUT_AV
        
        OUT_AV:
        ;VALIDACION
        MOV AX, X2 
        CMP AX,POSX
        JZ PRIMERA_VALIDACION
        JMP OUT_VALIDACION
        
        PRIMERA_VALIDACION:
            MOV AX, Y2
            CMP AX, POSY
            JZ SEGUNDA_VALIDACION
            JMP OUT_VALIDACION  
        
        OUT_VALIDACION: 
        JMP BUCLE
        SEGUNDA_VALIDACION:
        ;VALIDACION
    RET
    
DIBUJA_BRESENHAM ENDP

DIBUJA_LINEA_VERTICAL PROC
    
      MOV POSX, AX
      MOV POSY, BX
      
      MOV BX, CX
      
      PINTA:
        CALL DIBUJA_PIXEL
        DEC POSY
        CMP BX, POSY
        JZ OUT_PINTA
        JMP PINTA
      OUT_PINTA: 
      RET      
    
DIBUJA_LINEA_VERTICAL ENDP

DIBUJA_LINEA_HORIZONTAL PROC
        
      MOV POSX, AX
      MOV POSY, BX
      
      MOV BX, CX
      
      PINTA_H:
        CALL DIBUJA_PIXEL
        INC POSX
        CMP BX, POSX
        JZ OUT_PINTA_H
        JMP PINTA_H
      OUT_PINTA_H:  
      RET  
DIBUJA_lINEA_HORIZONTAL ENDP

DIBUJA_PIXEL PROC
     MOV AL, WHT
     MOV CX, POSX
     MOV DX, POSY
     MOV AH, 0CH
     INT 10H
     RET
DIBUJA_PIXEL ENDP

DIBUJA_PIXEL2 PROC
    
    ;GUARDA EL COLOR INDICADO
    MOV COLOR,AL
    
    ;GUARDAMOS LOS PUNTOS DEL CUADRADO
    MOV X_MIN, CX
    MOV Y_MIN, DX
    MOV X_MAX, CX
    MOV Y_MAX, DX
    
    MOV AX, LADO
    ADD X_MAX, AX
    
    MOV AX, ANCHO
    ADD Y_MAX, AX
    
    ;COLOR DEL PIXEL
    MOV AL, COLOR
    
    ;SOLO SE COLOREA UN PIXEL
    MOV AH, 0CH 
    
    ;DIBUJO UN PIXEL
    
    COLUMNA1:
        MOV CX, X_MIN
        
        LINEA1:
            ;DIBUJO
            INT 10H
            ;ACTUALIZO VALORES
            INC CX
            
            ;COMPARO SI LLEGO AL LARGO
            CMP CX, X_MAX
            
            JNZ LINEA1
            
        INC DX
        CMP DX, Y_MAX
        JNZ COLUMNA1
    
    RET
DIBUJA_PIXEL2 ENDP

CARGA_COLORES PROC
    MOV BX, DIR_COLORES
    
    ;LINEA 1
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 2
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 3
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 4
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 5
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    
    ;LINEA 6
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 7
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 8
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 9
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 10
    
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    
    ;LINEA 11
    
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA 
    
    ;LINEA 12
    
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    
    ;LINEA 13
    
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    MOV AL, MGT
    CALL CARGA
    
    ;LINEA 14
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, WHT
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 15
    
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    
    ;LINEA 16
    
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, BLK
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA
    MOV AL, GRN
    CALL CARGA 
    
CARGA_COLORES ENDP

CARGA PROC
    
    MOV (BX),AL
    INC BX
    RET  
    
CARGA ENDP 

GUARDA_POS PROC
    
    MOV X_POS, CX
    MOV Y_POS, DX
    RET
    
GUARDA_POS ENDP
```

### Simulacion de Paint
```asm
.model small
.stack 100h

.data
    quit_msg db 'Press any mouse button to quit', 0

.code
main proc
    ; Cambiar a modo gráfico 13h (320x200, 256 colores)
    mov ax, 13h
    int 10h

    ; Inicializar el mouse
    mov ax, 0000h
    int 33h

mouse_tracker:
    ; Obtener la posición del cursor del mouse
    mov ax, 0003h
    int 33h
    ; La posición se devuelve en CX (X) y DX (Y)

    ; Corregir escala en el eje X
    shr cx, 1   ; Dividir la coordenada X por 2

    ; Pintar un píxel en la posición del cursor del mouse
    mov ah, 0Ch        ; Función 0Ch: Escribir un píxel
    mov al, 15         ; Color del píxel (blanco)
    int 10h            ; Llamar a la interrupción del BIOS

    ; Verificar si se presionó algún botón del mouse
    mov ax, 0003h
    int 33h
    test bx, 7         ; Verificar los tres botones del mouse (izquierdo, derecho, central)
    jz mouse_tracker   ; Si no se presiona ningún botón, continuar el bucle

    ; Regresar a modo texto
    mov ax, 3
    int 10h

    ; Mostrar mensaje de salida
    lea dx, quit_msg
    mov ah, 09h
    int 21h

    ; Esperar entrada del usuario para finalizar
    mov ah, 08h
    int 21h

    ; Terminar programa
    mov ax, 4C00h
    int 21h
main endp
end main
```
